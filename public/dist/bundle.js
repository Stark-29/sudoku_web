(()=>{"use strict";var e={240:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BASE_LAYOUT=void 0,t.BASE_LAYOUT=[[0,1,2,3,4,5,6,7,8],[9,10,11,12,13,14,15,16,17],[18,19,20,21,22,23,24,25,26],[27,28,29,30,31,32,33,34,35],[36,37,38,39,40,41,42,43,44],[45,46,47,48,49,50,51,52,53],[54,55,56,57,58,59,60,61,62],[63,64,65,66,67,68,69,70,71],[72,73,74,75,76,77,78,79,80]]},647:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DIFFICULTY_LEVELS=void 0;t.DIFFICULTY_LEVELS=Object.keys({easy:void 0,medium:void 0,hard:void 0,expert:void 0})},956:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SEEDS=void 0,t.SEEDS=[{puzzle:"g--d--caf---g----ii-f--hg-bb-iaedhgc--afcg--d-g-b-----f-d--abc---b------c--h-bfia",solution:"gbhdiecafacegbfdhiidfcahgebbfiaedhgcehafcgibddgcbhiafefidegabchhabifcedgceghdbfia",difficulty:"easy"},{puzzle:"bf-hiac-g-gi------a-hf-g---g-a-fi--ddef---i-b--b-a-g-ff---gbh--hac---------e-cfd-",solution:"bfdhiacegegicbdafhachfegdbighabfiecddefgchiabcibdaeghffdeagbhichacidfbgeibgehcfda",difficulty:"easy"},{puzzle:"hgad-e--b-cbf-ge---df-aih-----i-------d-ecai-g---fa----igadf----fe-i-----h-eg-fd-",solution:"hgadceifbicbfhgeadedfbaihcgcahibdgeffbdgecaihgeihfadbcbigadfchedfecihbgaahcegbfdi",difficulty:"easy"},{puzzle:"-fbe-c----e-----a---g-ihb--gb-fhdc-eid-g-eahbch-----f-----ef-ga-g----e-i--hi-----",solution:"afbegcidhheidfbgacdcgaihbefgbafhdcieidfgceahbchebaidfgbidcefhgafgchdaebieahibgfcd",difficulty:"easy"},{puzzle:"c--d-fgeb---g--i-hg-ih--da-a-g-b-cde-edc--a--b--------i-e-cd-ha-fb-h-e-ch--e-----",solution:"cahdifgebedfgabichgbihecdafahgfbicdefedcghabibicadehfgigebcdfhadfbihaegchcaefgbid",difficulty:"easy"},{puzzle:"bi---ec--eg--h-fbdf--------i-hba-dfe----ehbig--bf-d-h--f-e-a-c-----g-e--cde--f--a",solution:"bidgfecahegcahifbdfhadcbgeiichbagdfedafcehbiggebfidahchfgedaicbabihgcedfcdeibfhga",difficulty:"easy"},{puzzle:"-----ef-ha--bf--ecfe-gc---a----gbch--a--df-b--bi----f-h-af-gidbdf----g--i--c--ha-",solution:"bicdaefghahgbfidecfedgchbiaedfagbchicahidfebggbiehcafdhcafegidbdfbhiagceigecbdhaf",difficulty:"easy"},{puzzle:"--fg--hec-ebc-------h-dfgabb--h-a-fg-g-df-i--f-a---b--hf----ad---if----hc-ea---bi",solution:"dafgbihecgebcahdifichedfgabbidhcaefgegcdfbihafhaigebcdhfgbicadeabifedcghcdeahgfbi",difficulty:"easy"},{puzzle:"-----b-f-e-aih----bi----a----e---i---g-bf--a-----cihg-ic-fdhg-a--h---f-cgef-iad-b",solution:"dhcgabefiefaihcbdgbigdefachcaehgdibfhgibfecadfbdacihgeicbfdhgeaadhebgficgefciadhb",difficulty:"easy"},{puzzle:"e--f-b-------eid-f--h----b-ge-c-fadhab-ihgfe-hc--d----d-g---cf---eg--h-bf---i----",solution:"edcfgbihabgaheidcfifhdcaebggeicbfadhabdihgfechcfadebgidigbahcfecaegfdhibfhbeicgad",difficulty:"easy"},{puzzle:"g-hedcf---i-f--a--e--a-----c--i-deh-i-------g--g--e---a----f--c-cf-e-gi-b-------e",solution:"gahedcfbidicfbgaehefbaihcgdcbaigdehfihebfadcgfdghceiabaeighfbdchcfdebgiabgdcaihfe",difficulty:"medium"},{puzzle:"-di--ac---b-cid-h---h--b-d-----f----h-d----fca---c-i--d----i-e-bh---cd-g-g---fac-",solution:"fdighacbeebgcidfhacahfebgdigecifhbadhidabgefcafbdceighdcabgihefbhfeacdigigehdfacb",difficulty:"medium"},{puzzle:"--ac-i------ah-d---e----i---a-e-bc----g--f--ad---gae--ig-fa------hd-e-g-c-d-b----",solution:"hdaceigfbbifahgdcegecbfdiahfaiedbchgehgicfbdadcbhgaeifigefachbdabhdiefgccfdgbhaei",difficulty:"medium"},{puzzle:"fg----i---h--f-e--e-bd--afh-f--hg--ic------b----f-c-----c-------eiac-gdf-b-----e-",solution:"fgaebhicdihdcfaegbecbdgiafhdfebhgcaicahidefbgbigfacdhegdchefbiaheiacbgdfabfgidhec",difficulty:"medium"},{puzzle:"--d-g-fi---e-ci-d-a----eg-----i---f---bg--ec-e--d--haig----f----ha--------ch-g-e-",solution:"cbdaghfiehgefciadbaifbdeghcdahiecbfgifbghaecdecgdfbhaigeicafdbhbhaeidcgffdchbgiea",difficulty:"medium"},{puzzle:"----d-a---a-ie---di------h-d-e--cg-b-b-e--i----c-i--dh--h-gf--c------b-g--i-ce-a-",solution:"ehfcdgabicabiehfgdigdfbachediehacgfbhbgefdicaafcgibedhbehagfdicfcadhibeggdibcehaf",difficulty:"medium"},{puzzle:"---cfa-ibf---i-------g---f--i--h-cd-gdf--------cd--fb-------bc--gb---dhi---he--g-",solution:"dhecfagibfbgeidhaccaigbhefdbiafhecdggdfbaciehhecdgifbaafhidgbceegbacfdhiicdhebagf",difficulty:"medium"},{puzzle:"a------g-b--di-a-f--e--ahi----a------bae--------ichbaei---de------c-igd-d-h----ci",solution:"aidhefcgbbhgdicaeffcebgahidheiabgdfccbaefdihggdfichbaeiacgdefbhefbchigdadghfabeci",difficulty:"medium"},{puzzle:"----g-------ci--bg-i-de-af-------beh-----fgdi---eb-f----ah--ig---hg-d---cd--a----",solution:"hacfgbdieefdciahbggibdehafcagfidcbehbceahfgdidhiebgfcafbahceigdiehgfdcabcdgbaiehf",difficulty:"medium"},{puzzle:"gfbc---dh-a-------d--a--fi--daifc--ech------f-------c-f---e--b---d-----i--igh-d--",solution:"gfbcieadhiahbdfcegdceaghfibbdaifcghechgebdiafeifhagbcdfgcdeihbahbdfcaegiaeighbdfc",difficulty:"medium"},{puzzle:"-e-fh--a-g----ed---a--b-f---ih----dc--------a----g----b---i---dhc-gf-----g------e",solution:"debfhciagghfiaedcbcaidbgfehaihbefgdcfbgcdiehaedchgabifbfaeihcgdhcegfdabiigdacbhfe",difficulty:"hard"},{puzzle:"----i-b---fc--a-h-eb----i-fcieg--ad---hd-e----d--a----f---b-e-i-------b--h--e----",solution:"hageifbcdifcbdagheebdchgiafciegfbadhaghdcefibbdfiahcegfcahbdegideifgchbaghbaeidfc",difficulty:"hard"},{puzzle:"-------hg-----h-d-a-g---ei--ce--dg--dbf---------bfid--hg---f----d--h---c--a-eg---",solution:"bedfiachgficeghbdaahgdbceificehadgfbdbfgceiahgahbfidcehgbcdfaeiediahbfgccfaieghbd",difficulty:"hard"},{puzzle:"h---f------------i--e---a-h-dhe---a---fh-b----i--c---gf-ga-di--a-i---d-bce------a",solution:"hgcifabdedabgehfciifebdcaghbdheigcafgcfhabeideiadcfhbgfbgahdiecahicgedfbcedfbigha",difficulty:"hard"},{puzzle:"f----dha----b------a------dic---h------c--egb-----------a-----ed--f-ec-g-fg------",solution:"febigdhachdcbfageigaiehcbfdicegbhadfahfcdiegbbgdaefichcbadigfhedihfaecbgefghcbdia",difficulty:"hard"},{puzzle:"c-a---i---b--c--ede----g--c-e---dga--c---b--i--gf-----b-----ei------a-cg--ie----a",solution:"cfahdeigbgbhacifedeidbfgahchebcidgafacfgebhdiidgfahcbebacdgfeihfheibadcgdgiehcbfa",difficulty:"hard"},{puzzle:"--a-i---cc-g-------h--e--a--a---ib---d--f--h-----------i---d-f------g-c-dg---b--h",solution:"beagifhdccfghdaibeihdbecfaghafcgibedgdbafechiecidbhagfaihecdgfbfbeihgdcadgcfabeih",difficulty:"hard"},{puzzle:"i--f--ec------a-fbg-b-i---h-d---ihg-----b---fe---a------d-----i---ie-b-------g---",solution:"iahfdbecgdcehgaifbgfbeicdahbdacfihgechgdbeaifeifgahcbdhbdacfgeifgciedbhaaeibhgfdc",difficulty:"hard"},{puzzle:"--e---c------i--g-------d-hbaf--------cfhe--ie------f-h-d-c-----f-h----c---i-ga--",solution:"fdegbhciaacheidfgbibgcfadehbafdgihcedgcfhebaiehibacgfdhidacfebggfahebidccebidgahf",difficulty:"hard"},{puzzle:"--f-d-i---g--b-a-d--c-a-----c-i---e---eh--g---------ac---------b---i-e----gf--d--",solution:"abfcdhigehgiebfacddecgaibhfgcdifahebfaehcbgdiihbdegfacefabgdcihbdhaicefgcigfhedba",difficulty:"hard"},{puzzle:"-ica------------bh----g--f--g---a---i-e----c-a---f------d--bg------c---e-fg----id",solution:"ficabhdeggeaidfcbhdhbegcifabgfceahdiidebhgacfachdfiegbeadfibghchbigcdfaecfghaebid",difficulty:"expert"},{puzzle:"-h-i------i---------f--bh--b---a--ed-ca------i--f---h--------c----he--f-ab--df---",solution:"ehbicdgafdigafhcbecafegbhdibghcaifedfcadheigbiedfbgahchfebiadcggdihecbfaabcgdfeih",difficulty:"expert"},{puzzle:"-h--c-f-ice-------b--ia--------g-h------e---ff--h---i----b---eh----------ga--f--c",solution:"ahgdcefbiceigfbahdbfdiahcgediefgchabgbhaeidcffachbdeigicfbdagehedbchgifahgaeifbdc",difficulty:"expert"},{puzzle:"a----db---g-c----f--e-f--i---------i----h-f-d--g---ch---b--e-c-ca------h-d-------",solution:"afchidbegigdcebhafhbegfadicfehdgcabibcaehifgddigbafcheghbfdeicacafibgedhediachgfb",difficulty:"expert"},{puzzle:"------c--g-b--a---------g-h---e----gb--id-----i-f---eb----i---c-he-f-d--a------h-",solution:"edhbgicfagfbchaeidicadefgbhhafebcidgbegidhacfdicfaghebfgdhiebaccheafbdgiabigcdfhe",difficulty:"expert"},{puzzle:"---bf-i-------hc-aa----------g------h--c-e----i----bh----f---g--f-----e---hig-a--",solution:"chebfaidgfgdeihcbaabidcgefhbeghdifachafcbegiddicgafbheicafedhgbgfbahcdeiedhigbacf",difficulty:"expert"},{puzzle:"--c-----d---g-i--h-i----b--ace------d--bh----b--f---------e---------bea--d--a--c-",solution:"gecabhifdfbagdicehhidefcbgaaceigdhbfdgfbheaicbhifcagdeiagcefdhbcfhdibeagedbhagfci",difficulty:"expert"},{puzzle:"-----d-h--h-----a-gb------i-----a--g----eh-c--i--d-----ge---a--d----f-----ab--i--",solution:"iacefdghbehdgibcafgbfhacedicehfbadigfdgiehbcaaibcdgfehbgedhiafcdciagfhbehfabceigd",difficulty:"expert"},{puzzle:"-bi-------c----e---------af---eba-----a-i-g------c--i----h-e--d-e------gc-b--f---",solution:"fbiaegdhcachdfbegiedgchibafgicebafdhbhafidgcedfegchaibiafhgecbdhedbacifgcgbidfhea",difficulty:"expert"},{puzzle:"---i--h-bc----b----g----a----gd-----e--h-f------b---ac-c------ha-----id--i--gd---",solution:"deficahgbchagfbdeibgiedhacffagdicbheebchafgididhbegfacgcdabiefhafbcheidghiefgdcba",difficulty:"expert"}]},444:(e,t,a)=>{t.u=void 0;var i=a(618);Object.defineProperty(t,"u",{enumerable:!0,get:function(){return i.getSudoku}})},618:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSudoku=void 0;const i=a(240),d=a(647),c=a(236),n=a(146),o=a(720),r=a(57),l=a(956),f=a(663);t.getSudoku=e=>{if(e&&!(0,f.validateDifficulty)(e))throw new Error(`Invalid difficulty, expected one of: ${d.DIFFICULTY_LEVELS.join(", ")}`);const t=(0,n.getSeed)(l.SEEDS,e),a=(0,c.getLayout)(i.BASE_LAYOUT),s=(0,r.getTokenMap)();return{puzzle:(0,o.getSequence)(a,t.puzzle,s),solution:(0,o.getSequence)(a,t.solution,s),difficulty:t.difficulty}}},157:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.boardToSequence=void 0,t.boardToSequence=e=>e.map((e=>e.join(""))).join("")},569:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomItem=void 0,t.getRandomItem=e=>e[Math.floor(Math.random()*e.length)]},720:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSequence=void 0;const i=a(157),d=a(882),c=a(762);t.getSequence=(e,t,a)=>(0,i.boardToSequence)((0,d.populateLayout)(e,(0,c.replaceTokens)(t,a)))},762:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.replaceTokens=void 0,t.replaceTokens=(e,t)=>e.split("").map((e=>t[e]||e)).join("")},593:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sortRandom=void 0,t.sortRandom=()=>Math.random()<.5?1:-1},335:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLayoutBands=void 0,t.getLayoutBands=e=>[[e[0],e[1],e[2]],[e[3],e[4],e[5]],[e[6],e[7],e[8]]]},236:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLayout=void 0;const i=a(691),d=a(129);t.getLayout=e=>(0,d.shuffleLayout)((0,i.rotateLayout)(e))},882:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.populateLayout=void 0,t.populateLayout=(e,t)=>e.map((e=>e.map((e=>t[e]))))},384:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.rotateLayout0=void 0,t.rotateLayout0=e=>e},529:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.rotateLayout180=void 0,t.rotateLayout180=e=>e.map((e=>[...e].reverse())).reverse()},779:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.rotateLayout270=void 0,t.rotateLayout270=e=>e[0].map(((t,a)=>e.map((e=>[...e].reverse()[a]))))},873:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.rotateLayout90=void 0,t.rotateLayout90=e=>e[0].map(((t,a)=>e.map((e=>e[a])).reverse()))},691:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.rotateLayout=void 0;const i=a(569),d=a(384),c=a(529),n=a(779),o=a(873);t.rotateLayout=e=>(0,i.getRandomItem)([d.rotateLayout0,o.rotateLayout90,c.rotateLayout180,n.rotateLayout270])(e)},506:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shuffleLayoutBands=void 0;const i=a(335),d=a(593);t.shuffleLayoutBands=e=>(0,i.getLayoutBands)(e).sort(d.sortRandom).flat()},887:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shuffleLayoutColumns=void 0;const i=a(779),d=a(873),c=a(359);t.shuffleLayoutColumns=e=>(0,i.rotateLayout270)((0,c.shuffleLayoutRows)((0,d.rotateLayout90)(e)))},359:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shuffleLayoutRows=void 0;const i=a(335),d=a(593);t.shuffleLayoutRows=e=>(0,i.getLayoutBands)(e).map((e=>e.sort(d.sortRandom))).flat()},339:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shuffleLayoutStacks=void 0;const i=a(779),d=a(873),c=a(506);t.shuffleLayoutStacks=e=>(0,i.rotateLayout270)((0,c.shuffleLayoutBands)((0,d.rotateLayout90)(e)))},129:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shuffleLayout=void 0;const i=a(506),d=a(887),c=a(359),n=a(339);t.shuffleLayout=e=>(0,d.shuffleLayoutColumns)((0,c.shuffleLayoutRows)((0,n.shuffleLayoutStacks)((0,i.shuffleLayoutBands)(e))))},146:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSeed=void 0;const i=a(569),d=a(595);t.getSeed=(e,t)=>(0,i.getRandomItem)((0,d.getSeedsByDifficulty)(e,t))},595:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSeedsByDifficulty=void 0,t.getSeedsByDifficulty=(e,t)=>e.filter((e=>!t||e.difficulty===t))},57:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTokenMap=void 0;const i=a(593);t.getTokenMap=()=>"abcdefghi".split("").sort(i.sortRandom).reduce(((e,t,a)=>({...e,[t]:String(a+1)})),{})},663:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateDifficulty=void 0;const i=a(647);t.validateDifficulty=e=>i.DIFFICULTY_LEVELS.includes(e)}},t={};function a(i){var d=t[i];if(void 0!==d)return d.exports;var c=t[i]={exports:{}};return e[i](c,c.exports,a),c.exports}(()=>{var e=a(444);function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i,d,c,n,o=[],r=!0,l=!1;try{if(c=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;r=!1}else for(;!(r=(i=c.call(a)).done)&&(o.push(i.value),o.length!==t);r=!0);}catch(e){l=!0,d=e}finally{try{if(!r&&null!=a.return&&(n=a.return(),Object(n)!==n))return}finally{if(l)throw d}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}var d,c,n,o=null,r=null,l=[],f=null,s=null,g=[],u=[],h=!1,b=!1,m=!1,y=0,p=3,v=new Array(9).fill(0),L="easy",E=document.querySelector(".tool:first-child img");E.addEventListener("click",(function(){var e=E.parentElement.querySelector("span");e.style.color="#2f7bda",(b=!b)?(x(z(l)),E.classList.toggle("pressed")):(document.querySelectorAll(".grid-container").forEach((function(e){return e.remove()})),e.style.color="#aaaaaa",E.classList.remove("pressed"))}));var S=document.querySelectorAll(".tool")[1].querySelector("img");S.addEventListener("click",(function(){var e=S.nextElementSibling;(m=!m)?(console.log("Lápiz de candidatos activado"),S.classList.toggle("pressed"),e.style.color="#2f7bda"):(console.log("Lápiz de candidatos desactivado"),e.style.color="#aaaaaa",S.classList.remove("pressed"))}));var I=document.querySelector(".tool:nth-child(3) img.pista-image");function z(e){for(var t=[],a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++)if(0===e[a][i]){var d=k(e,a,i);t.push({row:a,col:i,candidates:d})}return t}function k(e,t,a){for(var i=[],d=1;d<=9;d++)B(e,t,a,d)&&i.push(d);return i}function B(e,t,a,i){for(var d=0;d<9;d++)if(e[t][d]===i)return!1;for(var c=0;c<9;c++)if(e[c][a]===i)return!1;for(var n=3*Math.floor(t/3),o=3*Math.floor(a/3),r=n;r<n+3;r++)for(var l=o;l<o+3;l++)if(e[r][l]===i)return!1;return!0}function x(e){e.forEach((function(e){var t=e.row,a=e.col,i=e.candidates,d=document.getElementById(t+"-"+a);if(d&&!d.querySelector(".user-input")&&!d.classList.contains("tile-start")&&!d.classList.contains("pista")){var c=d.querySelector(".grid-container");if(c&&c.classList.contains("user-modified"))c.querySelectorAll(".candidate").forEach((function(e){var t=parseInt(e.textContent);i.includes(t)||e.remove()}));else{d.innerHTML="",(c=document.createElement("div")).classList.add("grid-container");var n=[[1,2,3],[4,5,6],[7,8,9]];i.forEach((function(e){var t=document.createElement("span");t.classList.add("candidate");var a=n[Math.floor((e-1)/3)][(e-1)%3];t.style.gridColumn=a%3==0?3:a%3,t.style.gridRow=Math.ceil(a/3),t.textContent=e,c.appendChild(t)})),d.appendChild(c)}}}))}function T(){v=new Array(9).fill(0)}function C(){var e=document.getElementById("remaining-container");e.innerHTML="";for(var t=1;t<=9;t++){var a=document.createElement("div"),i=9-f[t-1];a.innerText=i,a.classList.add("remaining"),a.dataset.number=t,e.appendChild(a)}}function M(e){for(var t=new Array(9).fill(0),a=0;a<9;a++)for(var i=0;i<9;i++){var d=e[a][i];0!==d&&t[d-1]++}return t}function _(t,a){if(o=null,D(),H(),T(),t&&a)g=t,u=a,l=JSON.parse(JSON.stringify(g)),f=M(g),C();else{var i=(0,e.u)(L),c=i.puzzle,n=i.solution;console.log("Sudoku generado:",c),g=[];for(var r=0;r<9;r++)g.push(c.substring(9*r,9*(r+1)).split("").map((function(e){return"-"===e?0:parseInt(e)})));l=JSON.parse(JSON.stringify(g)),f=M(g),C(),u=[];for(var s=0;s<9;s++)u.push(n.substring(9*s,9*(s+1)).split("").map((function(e){return"-"===e?0:parseInt(e)})))}console.log("Sudoku resuelto:",u),console.log("Nested Puzzle:",g),M(g);for(var h=1;h<=9;h++){var b=document.createElement("div");b.innerText=h,b.dataset.number=h,b.addEventListener("click",F),b.classList.add("number"),document.getElementById("digits").appendChild(b)}for(var m=0;m<9;m++)for(var y=0;y<9;y++){var p=document.createElement("div");if(p.id=m.toString()+"-"+y.toString(),0!==g[m][y]){p.innerText=g[m][y],p.classList.add("tile-start");var E=g[m][y];v[E-1]++}2!=m&&5!=m||p.classList.add("horizontal-line"),0!=m&&1!=m&&3!=m&&4!=m&&6!=m&&7!=m||p.classList.add("horizontal-grid"),2!=y&&5!=y||p.classList.add("vertical-line"),0!=y&&1!=y&&3!=y&&4!=y&&6!=y&&7!=y||p.classList.add("vertical-grid"),p.addEventListener("click",O),p.classList.add("tile"),document.getElementById("board").append(p)}d=u,document.getElementById("difficulty").textContent=L.charAt(0).toUpperCase()+L.slice(1)}function A(e,t){var a=s.row,i=s.col,d=Math.max(0,Math.min(8,a+e)),c=Math.max(0,Math.min(8,i+t)),n="".concat(d,"-").concat(c);try{var o=document.getElementById(n);o&&(Y(),j(),s={row:d,col:c},localStorage.setItem("selectedCell",JSON.stringify(s)),r=o,o.classList.add("highlighted"),r.classList.contains("user-input")||r.classList.contains("tile-start")?(w(parseInt(r.innerText)),q(d,c)):q(d,c))}catch(e){console.error("Error al seleccionar la celda:",e.message)}}function O(e,t){var a;if(Y(),j(),e?((a=e.target).classList.contains("grid-container")||a.classList.contains("candidate"))&&(console.log("El clic se realizó en un grid-container o un candidato"),a=a.closest(".tile")):a=r,a){var i=a.id.split("-"),c=parseInt(i[0]),n=parseInt(i[1]);s={row:c,col:n},(r=a).classList.add("highlighted"),q(c,n);var f=r.classList.contains("user-input")||r.classList.contains("tile-start");if(f&&w(t||parseInt(r.innerText)),!f&&t&&(""===r.innerText||r.querySelectorAll(".candidate").length>0)){if(console.log("Valor de solution en la celda:",d[c][n]),console.log("El número seleccionado es ".concat(t,".")),m)return void function(e,t){var a=e.row,i=e.col,d=document.getElementById("".concat(a,"-").concat(i));if(d&&!d.classList.contains("user-input")&&!d.classList.contains("tile-start")){var c=d.querySelector(".grid-container");c||((c=document.createElement("div")).classList.add("grid-container"),d.appendChild(c)),c.classList.add("user-modified");var n=c.querySelectorAll(".candidate"),o=[[1,2,3],[4,5,6],[7,8,9]][Math.floor((t-1)/3)][(t-1)%3],r=Array.from(n).find((function(e){var t=parseInt(e.style.gridRow),a=parseInt(e.style.gridColumn);return t===Math.ceil(o/3)&&a===(o%3==0?3:o%3)}));if(r)r.remove();else{var l=document.createElement("span");l.textContent=t,l.classList.add("candidate","user-candidate"),l.style.gridColumn=o%3==0?3:o%3,l.style.gridRow=Math.ceil(o/3),c.appendChild(l)}}}(s,t);d&&d[c]&&d[c][n]===t?(U(t)?(r.innerText=t,console.log("El número ".concat(t," ha sido colocado en la celda ").concat(c,"-").concat(n,".")),r.classList.add("user-input"),r.querySelectorAll(".candidate").forEach((function(e){return e.remove()})),l[c][n]=t,v[t-1]++,console.log("Número ".concat(t," ha sido colocado ").concat(v[t-1]," veces.")),U(t)||(J(t),o=null),b&&x(z(l)),w(t),function(){var e=document.getElementById("remaining-container");e.innerHTML="";for(var t=1;t<=9;t++){var a=document.createElement("div"),i=9-v[t-1];i>0?a.innerText=i:(a.style.backgroundColor="transparent",a.style.visibility="hidden"),a.classList.add("remaining"),a.dataset.number=t,e.appendChild(a)}}(),q(c,n)):(y+=1,document.getElementById("errors").innerText="Mistakes: ".concat(y,"/").concat(p),y>=p&&(V(),P())),function(){for(var e=0;e<9;e++)for(var t=0;t<9;t++){var a=document.getElementById("".concat(e,"-").concat(t));if(a.classList.contains("user-input")||a.classList.contains("tile-start")){if(a.innerText!==d[e][t].toString())return!1}else if(""!==a.innerText.trim()||!a.querySelector(".candidate"))return!1}return console.log("El sudoku esta resuelto"),!0}()&&(V(),function(e){b=!1,h=!0,localStorage.clear(),document.getElementById("pause-button").style.display="none";var t=document.getElementById("board"),a=document.createElement("div");a.classList.add("dialog-container"),document.body.appendChild(a);var i=document.createElement("div");i.classList.add("dialog-box"),i.id="congratulations-message",a.appendChild(i);var d=document.createElement("div");d.classList.add("stars-container"),i.appendChild(d);for(var c=0;c<3;c++){var n=document.createElement("img");n.src="./assets/star-empty.png",n.classList.add("star"),d.appendChild(n)}var o=d.querySelectorAll(".star");0===e?o.forEach((function(e){e.src="./assets/star.png"})):1===e?(o[0].src="./assets/star.png",o[1].src="./assets/star.png"):2===e&&(o[0].src="./assets/star.png");var r=document.createElement("div"),l=document.getElementById("timer").innerText;r.innerHTML='\n    <div class="congratulations-title">¡Congratulations!</div>\n    <div class="congratulations-details">\n<p><span class="label">Time:</span> '.concat(l,'</p>\n  <p><span class="label">Difficulty:</span> ').concat(L.charAt(0).toUpperCase()+L.slice(1),'</p>\n  <p><span class="label">Mistakes:</span> ').concat(e,"/3</p>\n    </div>\n  "),r.classList.add("congratulations-text"),i.appendChild(r);var f=document.createElement("button");f.textContent="New Game",f.classList.add("new-game-button"),f.addEventListener("click",(function(){N(),document.getElementById("start-modal").style.display="block",document.getElementById("timer").innerText="",document.getElementById("pause-button").style.display="none",V(),a.remove()})),i.appendChild(f);var s=document.createElement("button");s.textContent="Replay Game",s.classList.add("restart-button"),s.addEventListener("click",(function(){document.getElementById("timer").innerText="",V(),Y(),R(g,u),i.remove(),a.remove(),document.getElementById("pause-button").style.display="block"})),i.appendChild(s),t.appendChild(i)}(y))):(y+=1,document.getElementById("errors").innerText="Mistakes: ".concat(y,"/").concat(p),a.classList.add("shake-animation"),a.style.backgroundColor="red",setTimeout((function(){a.style.transition="background-color 0.3s",a.style.backgroundColor=""}),300),setTimeout((function(){a.classList.remove("shake-animation")}),500),y>=p&&(V(),P()))}}}function q(e,t){for(var a=3*Math.floor(e/3),i=3*Math.floor(t/3),d=a;d<a+3;d++)for(var c=i;c<i+3;c++)document.getElementById("".concat(d,"-").concat(c)).classList.add("highlighted-square");for(var n=0;n<9;n++)document.getElementById("".concat(n,"-").concat(t)).classList.add("highlighted-line"),document.getElementById("".concat(e,"-").concat(n)).classList.add("highlighted-line")}function w(e){j(),document.querySelectorAll("#board > div.tile").forEach((function(t){t.innerText===e.toString()&&(t.classList.contains("tile-start")||t.classList.contains("user-input"))&&(t.classList.add("highlighted"),t.style.backgroundColor="rgb(64, 89, 126)")})),document.querySelectorAll(".candidate").forEach((function(t){t.innerText===e.toString()&&t.classList.add("highlighted-candidate")}))}function j(){document.querySelectorAll(".highlighted, .highlighted-candidate").forEach((function(e){e.classList.remove("highlighted","highlighted-candidate"),e.style.backgroundColor=""}))}function P(){var e=document.getElementById("board");document.querySelectorAll("#board .tile").forEach((function(e){e.removeEventListener("click",O)})),document.getElementById("digits").style.cursor="default";var t=document.querySelectorAll("#digits > div"),a=document.querySelectorAll("#remaining-container > div");document.getElementById("pause-button").style.display="none",localStorage.clear(),t.forEach((function(e){e.classList.add("unavailable"),e.style.cursor="default"})),a.forEach((function(e){e.classList.add("unavailable")})),h=!0;var i=document.createElement("div");i.classList.add("dialog-container"),document.body.appendChild(i);var d=document.createElement("div");d.classList.add("dialog-box"),d.id="game-over-message",i.appendChild(d);var c=document.createElement("div");c.classList.add("over-container"),d.appendChild(c);for(var n=0;n<3;n++){var o=document.createElement("img");o.src="./assets/game-over2.png",o.classList.add("over"),c.appendChild(o)}c.querySelectorAll(".over").forEach((function(e){e.src="./assets/game-over2.png"}));var r=document.createElement("div");r.innerHTML='\n    <div class="gameOver-title">GAME OVER</div>\n  <p>You can start a new game or replay the same game</p>\n  ',r.classList.add("game-over-text"),d.appendChild(r);var l=document.createElement("button");l.textContent="New Game",l.classList.add("new-game-button"),l.addEventListener("click",(function(){N(),document.getElementById("start-modal").style.display="block",document.getElementById("timer").innerText="",document.getElementById("errors").innerText="",document.getElementById("difficulty").innerText="",document.getElementById("pause-button").style.display="none",V(),d.remove(),i.remove()})),d.appendChild(l);var f=document.createElement("button");f.textContent="Replay Game",f.classList.add("restart-button"),f.addEventListener("click",(function(){V(),Y(),R(g,u),d.remove(),i.remove(),document.getElementById("timer").innerText="00:00",document.getElementById("pause-button").style.display="block"})),d.appendChild(f),e.appendChild(d)}function R(e,t){y=0,h=!1,b=!1,l=[],g=e,u=t,document.getElementById("errors").innerText="Mistakes: 0/3",document.querySelectorAll("img.pressed").forEach((function(e){e.classList.remove("pressed")})),document.querySelectorAll("span").forEach((function(e){e.style.color=""})),D(),_(e,t)}function N(){y=0,h=!1,document.getElementById("errors").innerText="Mistakes: 0/3",b=!1,document.querySelectorAll("img.pressed").forEach((function(e){e.classList.remove("pressed")})),document.querySelectorAll("span").forEach((function(e){e.style.color=""})),D()}function D(){for(var e=document.getElementById("board");e.firstChild;)e.removeChild(e.firstChild);var t=document.getElementById("game-over-message");t&&t.remove();var a=document.getElementById("congratulations-message");a&&a.remove();var i=document.getElementById("digits");i&&(i.innerHTML="")}I.addEventListener("click",(function(){if(I.classList.add("bulb-pressed"),setTimeout((function(){I.classList.remove("bulb-pressed")}),300),s){var e=s,t=e.row,a=e.col,i=document.getElementById("".concat(t,"-").concat(a));if(i&&!i.classList.contains("user-input")&&!i.classList.contains("tile-start")){i.innerHTML="";var c=d[t][a];0!==c&&(i.innerText=c,i.classList.add("user-input"),i.classList.add("pista"),v[c-1]++,l[t][a]=c,b&&x(z(l))),w(c)}}})),document.querySelectorAll(".difficulty-btn").forEach((function(e){e.addEventListener("click",(function(){L=e.getAttribute("data-difficulty"),_(),localStorage.clear(),document.getElementById("start-modal").style.display="none",document.getElementById("timer").innerText="00:00",document.getElementById("errors").innerText="Mistakes: 0/3",document.getElementById("pause-button").style.display="block"}))})),document.addEventListener("keydown",(function(e){var t=e.key;if(!h)switch(t){case"ArrowUp":A(-1,0);break;case"ArrowDown":A(1,0);break;case"ArrowLeft":A(0,-1);break;case"ArrowRight":A(0,1);break;default:if(!isNaN(t)&&" "!==t){var a=parseInt(t);if(a>=1&&a<=9){if(v[a-1]>=9)return void console.log("Colocado 9 veces el numero ".concat(a));O(null,a)}}}})),document.querySelectorAll("#digits > div").forEach((function(e){e.addEventListener("click",F)}));var G=null;function U(e){return v[e-1]<9}function J(e){var t=document.querySelector('#digits [data-number="'.concat(e,'"]'));t&&(t.classList.add("unavailable"),t.removeEventListener("click",F))}function F(e){var t,a=parseInt(e.target.dataset.number);if(o&&parseInt(o.innerText)===a)return o.style.backgroundColor="",Y(),void(o=null);null!==G&&(t=G,document.querySelectorAll("#board > div.tile").forEach((function(e){e.innerText===t&&(e.classList.remove("highlighted"),e.style.backgroundColor="")}))),Y(),document.querySelectorAll("#board > div.tile").forEach((function(e){e.innerText===a.toString()&&(e.classList.add("highlighted"),e.style.backgroundColor="rgb(64, 89, 126)")})),G=a,U(a)?O(null,a):J(a)}function Y(){document.querySelectorAll("#board > div.tile").forEach((function(e){e.classList.remove("highlighted"),e.style.backgroundColor="",e.classList.remove("highlighted-line"),e.classList.remove("highlighted-square")}))}function H(){if(!c){var e=0,a=localStorage.getItem("sudokuTimer");if(null===a&&(a="00:00"),a){var i=t(a.split(":").map(Number),2),d=i[0],o=i[1];e=6e4*d+1e3*o}n=Date.now()-e,c=setInterval((function(){$(e=Date.now()-n)}),1e3)}}function V(){clearInterval(c),c=null,n=null}function $(e){var t=Math.floor(e/6e4),a=Math.floor(e%6e4/1e3),i="".concat(t.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"));document.getElementById("timer").innerText=i,localStorage.setItem("sudokuTimer",i)}function K(e){var a=t(e.split(":"),2),i=a[0],d=a[1];return 6e4*parseInt(i,10)+1e3*parseInt(d,10)}document.getElementById("pause-button").addEventListener("click",(function(){var e=document.getElementById("pauseModal");e&&e.remove();var t=document.createElement("div");t.id="pauseModal",t.className="modal";var a=document.createElement("div");a.className="modal-content";var i=document.createElement("h2");i.innerText="GAME PAUSED";var d=document.createElement("p");d.innerText="The game is currently paused, click the button to resume playing.";var n=document.createElement("button");n.id="resumeGameButton",n.innerText="Resume Game",n.addEventListener("click",(function(){t.style.display="none",H()})),t.appendChild(a),a.appendChild(i),a.appendChild(d),a.appendChild(n),document.body.appendChild(t),t.style.display="block",c?V():H()})),window.addEventListener("beforeunload",(function(){console.log("beforeunload event triggered");var e=document.querySelectorAll(".tile");console.log("Board length:",e.length),e.length>0&&!h?(console.log("Saving game state..."),function(){console.log("Saving game state...");var e=l.map((function(e,t){return e.map((function(e,a){return{value:e,type:0!==e&&document.getElementById("".concat(t,"-").concat(a)).classList.contains("user-input")?"user-input":"tile-start"}}))})),t=e.map((function(e){return e.map((function(e){return function(e){return"tile-start"===e.type?0:1}(e)}))})),a=e.map((function(e){return e.map((function(e){return e.value}))})),i=document.getElementById("difficulty").innerText,d=document.getElementById("timer").innerText,c=JSON.stringify({currentSudokuState:a,simplifiedState:t,nestedSolution:u,errors:y,difficulty:i,timer:d});console.log("Saving game state to localStorage:",c),localStorage.setItem("sudokuGameState",c)}(),console.log("Game state saved successfully.")):console.log("No need to save game state.")})),window.addEventListener("DOMContentLoaded",(function(){localStorage.getItem("sudokuGameState")?(console.log("Game state found in localStorage. Loading game state..."),document.getElementById("start-modal").style.display="none",function(){console.log("Loading game state...");var e=localStorage.getItem("sudokuGameState");if(e){console.log("Game state found:",e);var t=JSON.parse(e);t.currentSudokuState&&t.nestedSolution&&t.simplifiedState&&void 0!==t.errors&&t.difficulty&&t.timer?(l=t.currentSudokuState,u=t.nestedSolution,function(e,t){o=null,D(),H(),T(),g=e,u=t;var a=localStorage.getItem("sudokuGameState"),i=JSON.parse(a);l=i.currentSudokuState,console.log(i.errors),i.errors>0&&(y=i.errors);var c=i.simplifiedState,n=i.timer;n&&$(K(n));var r=localStorage.getItem("selectedCell");r&&(s=JSON.parse(r)),H(K(n)),f=M(g),C(),M(g);for(var h=1;h<=9;h++){var b=document.createElement("div");b.innerText=h,b.dataset.number=h,b.addEventListener("click",F),b.classList.add("number"),document.getElementById("digits").appendChild(b)}for(var m=0;m<9;m++)for(var p=0;p<9;p++){var L=document.createElement("div");L.id=m.toString()+"-"+p.toString();var E=l[m][p],S=0===c[m][p]?"tile-start":"user-input";0!==E?(L.innerText=E,L.classList.add(S),v[E-1]++,L.addEventListener("click",O)):L.addEventListener("click",O),2!=m&&5!=m||L.classList.add("horizontal-line"),0!=m&&1!=m&&3!=m&&4!=m&&6!=m&&7!=m||L.classList.add("horizontal-grid"),2!=p&&5!=p||L.classList.add("vertical-line"),0!=p&&1!=p&&3!=p&&4!=p&&6!=p&&7!=p||L.classList.add("vertical-grid"),L.classList.add("tile"),document.getElementById("board").append(L)}d=u,document.getElementById("errors").innerText="Mistakes: ".concat(y,"/3"),document.getElementById("difficulty").innerText=i.difficulty}(l,u)):console.error("Invalid game state format.")}else console.log("No game state found in localStorage.")}()):(console.log("Game is not over or no game state found. Showing modal."),document.getElementById("start-modal").style.display="block",document.getElementById("timer").innerText="",document.getElementById("pause-button").style.display="none",V())}))})()})();