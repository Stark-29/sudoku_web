(()=>{"use strict";var e={240:(e,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BASE_LAYOUT=void 0,a.BASE_LAYOUT=[[0,1,2,3,4,5,6,7,8],[9,10,11,12,13,14,15,16,17],[18,19,20,21,22,23,24,25,26],[27,28,29,30,31,32,33,34,35],[36,37,38,39,40,41,42,43,44],[45,46,47,48,49,50,51,52,53],[54,55,56,57,58,59,60,61,62],[63,64,65,66,67,68,69,70,71],[72,73,74,75,76,77,78,79,80]]},647:(e,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DIFFICULTY_LEVELS=void 0;a.DIFFICULTY_LEVELS=Object.keys({easy:void 0,medium:void 0,hard:void 0,expert:void 0})},956:(e,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SEEDS=void 0,a.SEEDS=[{puzzle:"g--d--caf---g----ii-f--hg-bb-iaedhgc--afcg--d-g-b-----f-d--abc---b------c--h-bfia",solution:"gbhdiecafacegbfdhiidfcahgebbfiaedhgcehafcgibddgcbhiafefidegabchhabifcedgceghdbfia",difficulty:"easy"},{puzzle:"bf-hiac-g-gi------a-hf-g---g-a-fi--ddef---i-b--b-a-g-ff---gbh--hac---------e-cfd-",solution:"bfdhiacegegicbdafhachfegdbighabfiecddefgchiabcibdaeghffdeagbhichacidfbgeibgehcfda",difficulty:"easy"},{puzzle:"hgad-e--b-cbf-ge---df-aih-----i-------d-ecai-g---fa----igadf----fe-i-----h-eg-fd-",solution:"hgadceifbicbfhgeadedfbaihcgcahibdgeffbdgecaihgeihfadbcbigadfchedfecihbgaahcegbfdi",difficulty:"easy"},{puzzle:"-fbe-c----e-----a---g-ihb--gb-fhdc-eid-g-eahbch-----f-----ef-ga-g----e-i--hi-----",solution:"afbegcidhheidfbgacdcgaihbefgbafhdcieidfgceahbchebaidfgbidcefhgafgchdaebieahibgfcd",difficulty:"easy"},{puzzle:"c--d-fgeb---g--i-hg-ih--da-a-g-b-cde-edc--a--b--------i-e-cd-ha-fb-h-e-ch--e-----",solution:"cahdifgebedfgabichgbihecdafahgfbicdefedcghabibicadehfgigebcdfhadfbihaegchcaefgbid",difficulty:"easy"},{puzzle:"bi---ec--eg--h-fbdf--------i-hba-dfe----ehbig--bf-d-h--f-e-a-c-----g-e--cde--f--a",solution:"bidgfecahegcahifbdfhadcbgeiichbagdfedafcehbiggebfidahchfgedaicbabihgcedfcdeibfhga",difficulty:"easy"},{puzzle:"-----ef-ha--bf--ecfe-gc---a----gbch--a--df-b--bi----f-h-af-gidbdf----g--i--c--ha-",solution:"bicdaefghahgbfidecfedgchbiaedfagbchicahidfebggbiehcafdhcafegidbdfbhiagceigecbdhaf",difficulty:"easy"},{puzzle:"--fg--hec-ebc-------h-dfgabb--h-a-fg-g-df-i--f-a---b--hf----ad---if----hc-ea---bi",solution:"dafgbihecgebcahdifichedfgabbidhcaefgegcdfbihafhaigebcdhfgbicadeabifedcghcdeahgfbi",difficulty:"easy"},{puzzle:"-----b-f-e-aih----bi----a----e---i---g-bf--a-----cihg-ic-fdhg-a--h---f-cgef-iad-b",solution:"dhcgabefiefaihcbdgbigdefachcaehgdibfhgibfecadfbdacihgeicbfdhgeaadhebgficgefciadhb",difficulty:"easy"},{puzzle:"e--f-b-------eid-f--h----b-ge-c-fadhab-ihgfe-hc--d----d-g---cf---eg--h-bf---i----",solution:"edcfgbihabgaheidcfifhdcaebggeicbfadhabdihgfechcfadebgidigbahcfecaegfdhibfhbeicgad",difficulty:"easy"},{puzzle:"g-hedcf---i-f--a--e--a-----c--i-deh-i-------g--g--e---a----f--c-cf-e-gi-b-------e",solution:"gahedcfbidicfbgaehefbaihcgdcbaigdehfihebfadcgfdghceiabaeighfbdchcfdebgiabgdcaihfe",difficulty:"medium"},{puzzle:"-di--ac---b-cid-h---h--b-d-----f----h-d----fca---c-i--d----i-e-bh---cd-g-g---fac-",solution:"fdighacbeebgcidfhacahfebgdigecifhbadhidabgefcafbdceighdcabgihefbhfeacdigigehdfacb",difficulty:"medium"},{puzzle:"--ac-i------ah-d---e----i---a-e-bc----g--f--ad---gae--ig-fa------hd-e-g-c-d-b----",solution:"hdaceigfbbifahgdcegecbfdiahfaiedbchgehgicfbdadcbhgaeifigefachbdabhdiefgccfdgbhaei",difficulty:"medium"},{puzzle:"fg----i---h--f-e--e-bd--afh-f--hg--ic------b----f-c-----c-------eiac-gdf-b-----e-",solution:"fgaebhicdihdcfaegbecbdgiafhdfebhgcaicahidefbgbigfacdhegdchefbiaheiacbgdfabfgidhec",difficulty:"medium"},{puzzle:"--d-g-fi---e-ci-d-a----eg-----i---f---bg--ec-e--d--haig----f----ha--------ch-g-e-",solution:"cbdaghfiehgefciadbaifbdeghcdahiecbfgifbghaecdecgdfbhaigeicafdbhbhaeidcgffdchbgiea",difficulty:"medium"},{puzzle:"----d-a---a-ie---di------h-d-e--cg-b-b-e--i----c-i--dh--h-gf--c------b-g--i-ce-a-",solution:"ehfcdgabicabiehfgdigdfbachediehacgfbhbgefdicaafcgibedhbehagfdicfcadhibeggdibcehaf",difficulty:"medium"},{puzzle:"---cfa-ibf---i-------g---f--i--h-cd-gdf--------cd--fb-------bc--gb---dhi---he--g-",solution:"dhecfagibfbgeidhaccaigbhefdbiafhecdggdfbaciehhecdgifbaafhidgbceegbacfdhiicdhebagf",difficulty:"medium"},{puzzle:"a------g-b--di-a-f--e--ahi----a------bae--------ichbaei---de------c-igd-d-h----ci",solution:"aidhefcgbbhgdicaeffcebgahidheiabgdfccbaefdihggdfichbaeiacgdefbhefbchigdadghfabeci",difficulty:"medium"},{puzzle:"----g-------ci--bg-i-de-af-------beh-----fgdi---eb-f----ah--ig---hg-d---cd--a----",solution:"hacfgbdieefdciahbggibdehafcagfidcbehbceahfgdidhiebgfcafbahceigdiehgfdcabcdgbaiehf",difficulty:"medium"},{puzzle:"gfbc---dh-a-------d--a--fi--daifc--ech------f-------c-f---e--b---d-----i--igh-d--",solution:"gfbcieadhiahbdfcegdceaghfibbdaifcghechgebdiafeifhagbcdfgcdeihbahbdfcaegiaeighbdfc",difficulty:"medium"},{puzzle:"-e-fh--a-g----ed---a--b-f---ih----dc--------a----g----b---i---dhc-gf-----g------e",solution:"debfhciagghfiaedcbcaidbgfehaihbefgdcfbgcdiehaedchgabifbfaeihcgdhcegfdabiigdacbhfe",difficulty:"hard"},{puzzle:"----i-b---fc--a-h-eb----i-fcieg--ad---hd-e----d--a----f---b-e-i-------b--h--e----",solution:"hageifbcdifcbdagheebdchgiafciegfbadhaghdcefibbdfiahcegfcahbdegideifgchbaghbaeidfc",difficulty:"hard"},{puzzle:"-------hg-----h-d-a-g---ei--ce--dg--dbf---------bfid--hg---f----d--h---c--a-eg---",solution:"bedfiachgficeghbdaahgdbceificehadgfbdbfgceiahgahbfidcehgbcdfaeiediahbfgccfaieghbd",difficulty:"hard"},{puzzle:"h---f------------i--e---a-h-dhe---a---fh-b----i--c---gf-ga-di--a-i---d-bce------a",solution:"hgcifabdedabgehfciifebdcaghbdheigcafgcfhabeideiadcfhbgfbgahdiecahicgedfbcedfbigha",difficulty:"hard"},{puzzle:"f----dha----b------a------dic---h------c--egb-----------a-----ed--f-ec-g-fg------",solution:"febigdhachdcbfageigaiehcbfdicegbhadfahfcdiegbbgdaefichcbadigfhedihfaecbgefghcbdia",difficulty:"hard"},{puzzle:"c-a---i---b--c--ede----g--c-e---dga--c---b--i--gf-----b-----ei------a-cg--ie----a",solution:"cfahdeigbgbhacifedeidbfgahchebcidgafacfgebhdiidgfahcbebacdgfeihfheibadcgdgiehcbfa",difficulty:"hard"},{puzzle:"--a-i---cc-g-------h--e--a--a---ib---d--f--h-----------i---d-f------g-c-dg---b--h",solution:"beagifhdccfghdaibeihdbecfaghafcgibedgdbafechiecidbhagfaihecdgfbfbeihgdcadgcfabeih",difficulty:"hard"},{puzzle:"i--f--ec------a-fbg-b-i---h-d---ihg-----b---fe---a------d-----i---ie-b-------g---",solution:"iahfdbecgdcehgaifbgfbeicdahbdacfihgechgdbeaifeifgahcbdhbdacfgeifgciedbhaaeibhgfdc",difficulty:"hard"},{puzzle:"--e---c------i--g-------d-hbaf--------cfhe--ie------f-h-d-c-----f-h----c---i-ga--",solution:"fdegbhciaacheidfgbibgcfadehbafdgihcedgcfhebaiehibacgfdhidacfebggfahebidccebidgahf",difficulty:"hard"},{puzzle:"--f-d-i---g--b-a-d--c-a-----c-i---e---eh--g---------ac---------b---i-e----gf--d--",solution:"abfcdhigehgiebfacddecgaibhfgcdifahebfaehcbgdiihbdegfacefabgdcihbdhaicefgcigfhedba",difficulty:"hard"},{puzzle:"-ica------------bh----g--f--g---a---i-e----c-a---f------d--bg------c---e-fg----id",solution:"ficabhdeggeaidfcbhdhbegcifabgfceahdiidebhgacfachdfiegbeadfibghchbigcdfaecfghaebid",difficulty:"expert"},{puzzle:"-h-i------i---------f--bh--b---a--ed-ca------i--f---h--------c----he--f-ab--df---",solution:"ehbicdgafdigafhcbecafegbhdibghcaifedfcadheigbiedfbgahchfebiadcggdihecbfaabcgdfeih",difficulty:"expert"},{puzzle:"-h--c-f-ice-------b--ia--------g-h------e---ff--h---i----b---eh----------ga--f--c",solution:"ahgdcefbiceigfbahdbfdiahcgediefgchabgbhaeidcffachbdeigicfbdagehedbchgifahgaeifbdc",difficulty:"expert"},{puzzle:"a----db---g-c----f--e-f--i---------i----h-f-d--g---ch---b--e-c-ca------h-d-------",solution:"afchidbegigdcebhafhbegfadicfehdgcabibcaehifgddigbafcheghbfdeicacafibgedhediachgfb",difficulty:"expert"},{puzzle:"------c--g-b--a---------g-h---e----gb--id-----i-f---eb----i---c-he-f-d--a------h-",solution:"edhbgicfagfbchaeidicadefgbhhafebcidgbegidhacfdicfaghebfgdhiebaccheafbdgiabigcdfhe",difficulty:"expert"},{puzzle:"---bf-i-------hc-aa----------g------h--c-e----i----bh----f---g--f-----e---hig-a--",solution:"chebfaidgfgdeihcbaabidcgefhbeghdifachafcbegiddicgafbheicafedhgbgfbahcdeiedhigbacf",difficulty:"expert"},{puzzle:"--c-----d---g-i--h-i----b--ace------d--bh----b--f---------e---------bea--d--a--c-",solution:"gecabhifdfbagdicehhidefcbgaaceigdhbfdgfbheaicbhifcagdeiagcefdhbcfhdibeagedbhagfci",difficulty:"expert"},{puzzle:"-----d-h--h-----a-gb------i-----a--g----eh-c--i--d-----ge---a--d----f-----ab--i--",solution:"iacefdghbehdgibcafgbfhacedicehfbadigfdgiehbcaaibcdgfehbgedhiafcdciagfhbehfabceigd",difficulty:"expert"},{puzzle:"-bi-------c----e---------af---eba-----a-i-g------c--i----h-e--d-e------gc-b--f---",solution:"fbiaegdhcachdfbegiedgchibafgicebafdhbhafidgcedfegchaibiafhgecbdhedbacifgcgbidfhea",difficulty:"expert"},{puzzle:"---i--h-bc----b----g----a----gd-----e--h-f------b---ac-c------ha-----id--i--gd---",solution:"deficahgbchagfbdeibgiedhacffagdicbheebchafgididhbegfacgcdabiefhafbcheidghiefgdcba",difficulty:"expert"}]},444:(e,a,t)=>{a.u=void 0;var i=t(618);Object.defineProperty(a,"u",{enumerable:!0,get:function(){return i.getSudoku}})},618:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getSudoku=void 0;const i=t(240),d=t(647),c=t(236),o=t(146),n=t(720),r=t(57),l=t(956),f=t(663);a.getSudoku=e=>{if(e&&!(0,f.validateDifficulty)(e))throw new Error(`Invalid difficulty, expected one of: ${d.DIFFICULTY_LEVELS.join(", ")}`);const a=(0,o.getSeed)(l.SEEDS,e),t=(0,c.getLayout)(i.BASE_LAYOUT),s=(0,r.getTokenMap)();return{puzzle:(0,n.getSequence)(t,a.puzzle,s),solution:(0,n.getSequence)(t,a.solution,s),difficulty:a.difficulty}}},157:(e,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.boardToSequence=void 0,a.boardToSequence=e=>e.map((e=>e.join(""))).join("")},569:(e,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getRandomItem=void 0,a.getRandomItem=e=>e[Math.floor(Math.random()*e.length)]},720:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getSequence=void 0;const i=t(157),d=t(882),c=t(762);a.getSequence=(e,a,t)=>(0,i.boardToSequence)((0,d.populateLayout)(e,(0,c.replaceTokens)(a,t)))},762:(e,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.replaceTokens=void 0,a.replaceTokens=(e,a)=>e.split("").map((e=>a[e]||e)).join("")},593:(e,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.sortRandom=void 0,a.sortRandom=()=>Math.random()<.5?1:-1},335:(e,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getLayoutBands=void 0,a.getLayoutBands=e=>[[e[0],e[1],e[2]],[e[3],e[4],e[5]],[e[6],e[7],e[8]]]},236:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getLayout=void 0;const i=t(691),d=t(129);a.getLayout=e=>(0,d.shuffleLayout)((0,i.rotateLayout)(e))},882:(e,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.populateLayout=void 0,a.populateLayout=(e,a)=>e.map((e=>e.map((e=>a[e]))))},384:(e,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.rotateLayout0=void 0,a.rotateLayout0=e=>e},529:(e,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.rotateLayout180=void 0,a.rotateLayout180=e=>e.map((e=>[...e].reverse())).reverse()},779:(e,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.rotateLayout270=void 0,a.rotateLayout270=e=>e[0].map(((a,t)=>e.map((e=>[...e].reverse()[t]))))},873:(e,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.rotateLayout90=void 0,a.rotateLayout90=e=>e[0].map(((a,t)=>e.map((e=>e[t])).reverse()))},691:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.rotateLayout=void 0;const i=t(569),d=t(384),c=t(529),o=t(779),n=t(873);a.rotateLayout=e=>(0,i.getRandomItem)([d.rotateLayout0,n.rotateLayout90,c.rotateLayout180,o.rotateLayout270])(e)},506:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.shuffleLayoutBands=void 0;const i=t(335),d=t(593);a.shuffleLayoutBands=e=>(0,i.getLayoutBands)(e).sort(d.sortRandom).flat()},887:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.shuffleLayoutColumns=void 0;const i=t(779),d=t(873),c=t(359);a.shuffleLayoutColumns=e=>(0,i.rotateLayout270)((0,c.shuffleLayoutRows)((0,d.rotateLayout90)(e)))},359:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.shuffleLayoutRows=void 0;const i=t(335),d=t(593);a.shuffleLayoutRows=e=>(0,i.getLayoutBands)(e).map((e=>e.sort(d.sortRandom))).flat()},339:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.shuffleLayoutStacks=void 0;const i=t(779),d=t(873),c=t(506);a.shuffleLayoutStacks=e=>(0,i.rotateLayout270)((0,c.shuffleLayoutBands)((0,d.rotateLayout90)(e)))},129:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.shuffleLayout=void 0;const i=t(506),d=t(887),c=t(359),o=t(339);a.shuffleLayout=e=>(0,d.shuffleLayoutColumns)((0,c.shuffleLayoutRows)((0,o.shuffleLayoutStacks)((0,i.shuffleLayoutBands)(e))))},146:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getSeed=void 0;const i=t(569),d=t(595);a.getSeed=(e,a)=>(0,i.getRandomItem)((0,d.getSeedsByDifficulty)(e,a))},595:(e,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getSeedsByDifficulty=void 0,a.getSeedsByDifficulty=(e,a)=>e.filter((e=>!a||e.difficulty===a))},57:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getTokenMap=void 0;const i=t(593);a.getTokenMap=()=>"abcdefghi".split("").sort(i.sortRandom).reduce(((e,a,t)=>({...e,[a]:String(t+1)})),{})},663:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.validateDifficulty=void 0;const i=t(647);a.validateDifficulty=e=>i.DIFFICULTY_LEVELS.includes(e)}},a={};function t(i){var d=a[i];if(void 0!==d)return d.exports;var c=a[i]={exports:{}};return e[i](c,c.exports,t),c.exports}(()=>{var e=t(444);function a(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,d,c,o,n=[],r=!0,l=!1;try{if(c=(t=t.call(e)).next,0===a){if(Object(t)!==t)return;r=!1}else for(;!(r=(i=c.call(t)).done)&&(n.push(i.value),n.length!==a);r=!0);}catch(e){l=!0,d=e}finally{try{if(!r&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(l)throw d}}return n}}(e,a)||function(e,a){if(e){if("string"==typeof e)return i(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,a):void 0}}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,i=new Array(a);t<a;t++)i[t]=e[t];return i}var d,c,o,n=null,r=null,l=[],f=null,s=null,g=[],u=[],h=!1,b=!1,m=!1,y=0,v=3,p=new Array(9).fill(0),L="easy",E=document.querySelector(".tool:first-child img");E.addEventListener("click",(function(){var e=E.parentElement.querySelector("span");e.style.color="#2f7bda",(b=!b)?(T(I(l)),E.classList.toggle("pressed")):(document.querySelectorAll(".grid-container").forEach((function(e){return e.remove()})),e.style.color="#aaaaaa",E.classList.remove("pressed"))}));var S=document.querySelectorAll(".tool")[1].querySelector("img");S.addEventListener("click",(function(){var e=S.nextElementSibling;(m=!m)?(console.log("Lápiz de candidatos activado"),S.classList.toggle("pressed"),e.style.color="#2f7bda"):(console.log("Lápiz de candidatos desactivado"),e.style.color="#aaaaaa",S.classList.remove("pressed"))}));var z=document.querySelector(".tool:nth-child(3) img.pista-image");function I(e){for(var a=[],t=0;t<e.length;t++)for(var i=0;i<e[t].length;i++)if(0===e[t][i]){var d=k(e,t,i);a.push({row:t,col:i,candidates:d})}return a}function k(e,a,t){for(var i=[],d=1;d<=9;d++)x(e,a,t,d)&&i.push(d);return i}function x(e,a,t,i){for(var d=0;d<9;d++)if(e[a][d]===i)return!1;for(var c=0;c<9;c++)if(e[c][t]===i)return!1;for(var o=3*Math.floor(a/3),n=3*Math.floor(t/3),r=o;r<o+3;r++)for(var l=n;l<n+3;l++)if(e[r][l]===i)return!1;return!0}function T(e){e.forEach((function(e){var a=e.row,t=e.col,i=e.candidates,d=document.getElementById(a+"-"+t);if(d&&!d.querySelector(".user-input")&&!d.classList.contains("tile-start")&&!d.classList.contains("pista")){var c=d.querySelector(".grid-container");if(c&&c.classList.contains("user-modified"))c.querySelectorAll(".candidate").forEach((function(e){var a=parseInt(e.textContent);i.includes(a)||e.remove()}));else{d.innerHTML="",(c=document.createElement("div")).classList.add("grid-container");var o=[[1,2,3],[4,5,6],[7,8,9]];i.forEach((function(e){var a=document.createElement("span");a.classList.add("candidate");var t=o[Math.floor((e-1)/3)][(e-1)%3];a.style.gridColumn=t%3==0?3:t%3,a.style.gridRow=Math.ceil(t/3),a.textContent=e,c.appendChild(a)})),d.appendChild(c)}}}))}function M(){p=new Array(9).fill(0)}function B(){var e=document.getElementById("remaining-container");e.innerHTML="";for(var a=1;a<=9;a++){var t=document.createElement("div"),i=9-f[a-1];t.innerText=i,t.classList.add("remaining"),t.dataset.number=a,e.appendChild(t)}}function C(e){for(var a=new Array(9).fill(0),t=0;t<9;t++)for(var i=0;i<9;i++){var d=e[t][i];0!==d&&a[d-1]++}return a}function _(a,t){if(n=null,D(),H(),M(),a&&t)g=a,u=t,l=JSON.parse(JSON.stringify(g)),f=C(g),B();else{var i=(0,e.u)(L),c=i.puzzle,o=i.solution;console.log("Sudoku generado:",c),g=[];for(var r=0;r<9;r++)g.push(c.substring(9*r,9*(r+1)).split("").map((function(e){return"-"===e?0:parseInt(e)})));l=JSON.parse(JSON.stringify(g)),f=C(g),B(),u=[];for(var s=0;s<9;s++)u.push(o.substring(9*s,9*(s+1)).split("").map((function(e){return"-"===e?0:parseInt(e)})))}console.log("Sudoku resuelto:",u),console.log("Nested Puzzle:",g),C(g);for(var h=1;h<=9;h++){var b=document.createElement("div");b.innerText=h,b.dataset.number=h,b.addEventListener("click",J),b.classList.add("number"),document.getElementById("digits").appendChild(b)}for(var m=0;m<9;m++)for(var y=0;y<9;y++){var v=document.createElement("div");if(v.id=m.toString()+"-"+y.toString(),0!==g[m][y]){v.innerText=g[m][y],v.classList.add("tile-start");var E=g[m][y];p[E-1]++}2!=m&&5!=m||v.classList.add("horizontal-line"),0!=m&&1!=m&&3!=m&&4!=m&&6!=m&&7!=m||v.classList.add("horizontal-grid"),2!=y&&5!=y||v.classList.add("vertical-line"),0!=y&&1!=y&&3!=y&&4!=y&&6!=y&&7!=y||v.classList.add("vertical-grid"),v.addEventListener("click",O),v.classList.add("tile"),document.getElementById("board").append(v)}d=u,document.getElementById("difficulty").textContent=L.charAt(0).toUpperCase()+L.slice(1)}function A(e,a){var t=s.row,i=s.col,d=Math.max(0,Math.min(8,t+e)),c=Math.max(0,Math.min(8,i+a)),o="".concat(d,"-").concat(c);try{var n=document.getElementById(o);n&&(Y(),j(),s={row:d,col:c},r=n,n.classList.add("highlighted"),r.classList.contains("user-input")||r.classList.contains("tile-start")?(w(parseInt(r.innerText)),q(d,c)):q(d,c))}catch(e){console.error("Error al seleccionar la celda:",e.message)}}function O(e,a){var t;if(Y(),j(),e?((t=e.target).classList.contains("grid-container")||t.classList.contains("candidate"))&&(console.log("El clic se realizó en un grid-container o un candidato"),t=t.closest(".tile")):t=r,t){var i=t.id.split("-"),c=parseInt(i[0]),o=parseInt(i[1]);s={row:c,col:o},(r=t).classList.add("highlighted"),q(c,o);var f=r.classList.contains("user-input")||r.classList.contains("tile-start");if(f&&w(a||parseInt(r.innerText)),!f&&a&&(""===r.innerText||r.querySelectorAll(".candidate").length>0)){if(console.log("Valor de solution en la celda:",d[c][o]),console.log("El número seleccionado es ".concat(a,".")),m)return void function(e,a){var t=e.row,i=e.col,d=document.getElementById("".concat(t,"-").concat(i));if(d&&!d.classList.contains("user-input")&&!d.classList.contains("tile-start")){var c=d.querySelector(".grid-container");c||((c=document.createElement("div")).classList.add("grid-container"),d.appendChild(c)),c.classList.add("user-modified");var o=c.querySelectorAll(".candidate"),n=[[1,2,3],[4,5,6],[7,8,9]][Math.floor((a-1)/3)][(a-1)%3],r=Array.from(o).find((function(e){var a=parseInt(e.style.gridRow),t=parseInt(e.style.gridColumn);return a===Math.ceil(n/3)&&t===(n%3==0?3:n%3)}));if(r)r.remove();else{var l=document.createElement("span");l.textContent=a,l.classList.add("candidate","user-candidate"),l.style.gridColumn=n%3==0?3:n%3,l.style.gridRow=Math.ceil(n/3),c.appendChild(l)}}}(s,a);d&&d[c]&&d[c][o]===a?(U(a)?(r.innerText=a,console.log("El número ".concat(a," ha sido colocado en la celda ").concat(c,"-").concat(o,".")),r.classList.add("user-input"),r.querySelectorAll(".candidate").forEach((function(e){return e.remove()})),l[c][o]=a,p[a-1]++,console.log("Número ".concat(a," ha sido colocado ").concat(p[a-1]," veces.")),U(a)||(F(a),n=null),b&&T(I(l)),w(a),function(){var e=document.getElementById("remaining-container");e.innerHTML="";for(var a=1;a<=9;a++){var t=document.createElement("div"),i=9-p[a-1];i>0?t.innerText=i:(t.style.backgroundColor="transparent",t.style.visibility="hidden"),t.classList.add("remaining"),t.dataset.number=a,e.appendChild(t)}}(),q(c,o)):(y+=1,document.getElementById("errors").innerText="Mistakes: ".concat(y,"/").concat(v),y>=v&&(V(),localStorage.removeItem("sudokuGameState"),P())),function(){for(var e=0;e<9;e++)for(var a=0;a<9;a++){var t=document.getElementById("".concat(e,"-").concat(a));if(t.classList.contains("user-input")||t.classList.contains("tile-start")){if(t.innerText!==d[e][a].toString())return!1}else if(""!==t.innerText.trim()||!t.querySelector(".candidate"))return!1}return console.log("El sudoku esta resuelto"),!0}()&&(V(),localStorage.removeItem("sudokuGameState"),function(e){b=!1,h=!0;var a=document.getElementById("board"),t=document.createElement("div");t.classList.add("dialog-container"),document.body.appendChild(t);var i=document.createElement("div");i.classList.add("dialog-box"),i.id="congratulations-message",t.appendChild(i);var d=document.createElement("div");d.classList.add("stars-container"),i.appendChild(d);for(var c=0;c<3;c++){var o=document.createElement("img");o.src="./assets/star-empty.png",o.classList.add("star"),d.appendChild(o)}var n=d.querySelectorAll(".star");0===e?n.forEach((function(e){e.src="./assets/star.png"})):1===e?(n[0].src="./assets/star.png",n[1].src="./assets/star.png"):2===e&&(n[0].src="./assets/star.png");var r=document.createElement("div"),l=document.getElementById("timer").innerText;r.innerHTML='\n    <div class="congratulations-title">¡Congratulations!</div>\n    <div class="congratulations-details">\n<p><span class="label">Time:</span> '.concat(l,'</p>\n  <p><span class="label">Difficulty:</span> ').concat(L.charAt(0).toUpperCase()+L.slice(1),'</p>\n  <p><span class="label">Mistakes:</span> ').concat(e,"/3</p>\n    </div>\n  "),r.classList.add("congratulations-text"),i.appendChild(r);var f=document.createElement("button");f.textContent="New Game",f.classList.add("new-game-button"),f.addEventListener("click",(function(){R(),document.getElementById("start-modal").style.display="block",document.getElementById("timer").innerText="",V(),t.remove()})),i.appendChild(f);var s=document.createElement("button");s.textContent="Replay Game",s.classList.add("restart-button"),s.addEventListener("click",(function(){document.getElementById("timer").innerText="",V(),Y(),G(g,u),i.remove(),t.remove()})),i.appendChild(s),a.appendChild(i)}(y))):(y+=1,document.getElementById("errors").innerText="Mistakes: ".concat(y,"/").concat(v),t.classList.add("shake-animation"),t.style.backgroundColor="red",setTimeout((function(){t.style.transition="background-color 0.3s",t.style.backgroundColor=""}),300),setTimeout((function(){t.classList.remove("shake-animation")}),500),y>=v&&(V(),localStorage.removeItem("sudokuGameState"),P()))}}}function q(e,a){for(var t=3*Math.floor(e/3),i=3*Math.floor(a/3),d=t;d<t+3;d++)for(var c=i;c<i+3;c++)document.getElementById("".concat(d,"-").concat(c)).classList.add("highlighted-square");for(var o=0;o<9;o++)document.getElementById("".concat(o,"-").concat(a)).classList.add("highlighted-line"),document.getElementById("".concat(e,"-").concat(o)).classList.add("highlighted-line")}function w(e){j(),document.querySelectorAll("#board > div.tile").forEach((function(a){a.innerText===e.toString()&&(a.classList.contains("tile-start")||a.classList.contains("user-input"))&&(a.classList.add("highlighted"),a.style.backgroundColor="rgb(64, 89, 126)")})),document.querySelectorAll(".candidate").forEach((function(a){a.innerText===e.toString()&&a.classList.add("highlighted-candidate")}))}function j(){document.querySelectorAll(".highlighted, .highlighted-candidate").forEach((function(e){e.classList.remove("highlighted","highlighted-candidate"),e.style.backgroundColor=""}))}function P(){var e=document.getElementById("board");document.querySelectorAll("#board .tile").forEach((function(e){e.removeEventListener("click",O)})),document.getElementById("digits").style.cursor="default";var a=document.querySelectorAll("#digits > div"),t=document.querySelectorAll("#remaining-container > div");a.forEach((function(e){e.classList.add("unavailable"),e.style.cursor="default"})),t.forEach((function(e){e.classList.add("unavailable")})),h=!0;var i=document.createElement("div");i.classList.add("dialog-container"),document.body.appendChild(i);var d=document.createElement("div");d.classList.add("dialog-box"),d.id="game-over-message",i.appendChild(d);var c=document.createElement("div");c.classList.add("over-container"),d.appendChild(c);for(var o=0;o<3;o++){var n=document.createElement("img");n.src="./assets/game-over2.png",n.classList.add("over"),c.appendChild(n)}c.querySelectorAll(".over").forEach((function(e){e.src="./assets/game-over2.png"}));var r=document.createElement("div");r.innerHTML='\n    <div class="gameOver-title">GAME OVER</div>\n  <p>You can start a new game or replay the same game</p>\n  ',r.classList.add("game-over-text"),d.appendChild(r);var l=document.createElement("button");l.textContent="New Game",l.classList.add("new-game-button"),l.addEventListener("click",(function(){R(),localStorage.removeItem("sudokuGameState"),document.getElementById("start-modal").style.display="block",document.getElementById("timer").innerText="",document.getElementById("errors").innerText="",document.getElementById("difficulty").innerText="",V(),d.remove(),i.remove()})),d.appendChild(l);var f=document.createElement("button");f.textContent="Replay Game",f.classList.add("restart-button"),f.addEventListener("click",(function(){V(),Y(),G(g,u),d.remove(),i.remove(),document.getElementById("timer").innerText="00:00"})),d.appendChild(f),e.appendChild(d)}function G(e,a){y=0,h=!1,b=!1,l=[],g=e,u=a,document.getElementById("errors").innerText="Mistakes: 0/3",document.querySelectorAll("img.pressed").forEach((function(e){e.classList.remove("pressed")})),document.querySelectorAll("span").forEach((function(e){e.style.color=""})),D(),_(e,a)}function R(){y=0,h=!1,document.getElementById("errors").innerText="Mistakes: 0/3",b=!1,document.querySelectorAll("img.pressed").forEach((function(e){e.classList.remove("pressed")})),document.querySelectorAll("span").forEach((function(e){e.style.color=""})),D()}function D(){for(var e=document.getElementById("board");e.firstChild;)e.removeChild(e.firstChild);var a=document.getElementById("game-over-message");a&&a.remove();var t=document.getElementById("congratulations-message");t&&t.remove();var i=document.getElementById("digits");i&&(i.innerHTML="")}z.addEventListener("click",(function(){if(z.classList.add("bulb-pressed"),setTimeout((function(){z.classList.remove("bulb-pressed")}),300),s){var e=s,a=e.row,t=e.col,i=document.getElementById("".concat(a,"-").concat(t));if(i&&!i.classList.contains("user-input")&&!i.classList.contains("tile-start")){i.innerHTML="";var c=d[a][t];0!==c&&(i.innerText=c,i.classList.add("user-input"),i.classList.add("pista"),p[c-1]++,l[a][t]=c,b&&T(I(l))),w(c)}}})),document.querySelectorAll(".difficulty-btn").forEach((function(e){e.addEventListener("click",(function(){L=e.getAttribute("data-difficulty"),_(),localStorage.removeItem("sudokuGameState"),document.getElementById("start-modal").style.display="none",document.getElementById("timer").innerText="00:00",document.getElementById("errors").innerText="Mistakes: 0/3"}))})),document.addEventListener("keydown",(function(e){var a=e.key;if(!h)switch(a){case"ArrowUp":A(-1,0);break;case"ArrowDown":A(1,0);break;case"ArrowLeft":A(0,-1);break;case"ArrowRight":A(0,1);break;default:if(!isNaN(a)&&" "!==a){var t=parseInt(a);if(t>=1&&t<=9){if(p[t-1]>=9)return void console.log("Colocado 9 veces el numero ".concat(t));O(null,t)}}}})),document.querySelectorAll("#digits > div").forEach((function(e){e.addEventListener("click",J)}));var N=null;function U(e){return p[e-1]<9}function F(e){var a=document.querySelector('#digits [data-number="'.concat(e,'"]'));a&&(a.classList.add("unavailable"),a.removeEventListener("click",J))}function J(e){var a,t=parseInt(e.target.dataset.number);if(n&&parseInt(n.innerText)===t)return n.style.backgroundColor="",Y(),void(n=null);null!==N&&(a=N,document.querySelectorAll("#board > div.tile").forEach((function(e){e.innerText===a&&(e.classList.remove("highlighted"),e.style.backgroundColor="")}))),Y(),document.querySelectorAll("#board > div.tile").forEach((function(e){e.innerText===t.toString()&&(e.classList.add("highlighted"),e.style.backgroundColor="rgb(64, 89, 126)")})),N=t,U(t)?O(null,t):F(t)}function Y(){document.querySelectorAll("#board > div.tile").forEach((function(e){e.classList.remove("highlighted"),e.style.backgroundColor="",e.classList.remove("highlighted-line"),e.classList.remove("highlighted-square")}))}function H(){if(!c){var e=0,t=localStorage.getItem("sudokuGameState")?JSON.parse(localStorage.getItem("sudokuGameState")).timer:null;if(t){var i=a(t.split(":").map(Number),2),d=i[0],n=i[1];e=6e4*d+1e3*n}o=Date.now()-e,c=setInterval((function(){$(e=Date.now()-o)}),1e3)}}function V(){clearInterval(c),c=null,o=null}function $(e){var a=Math.floor(e/6e4),t=Math.floor(e%6e4/1e3),i="".concat(a.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"));document.getElementById("timer").innerText=i}function K(e){var t=a(e.split(":"),2),i=t[0],d=t[1];return 6e4*parseInt(i,10)+1e3*parseInt(d,10)}window.addEventListener("beforeunload",(function(){console.log("beforeunload event triggered");var e=document.querySelectorAll(".tile");console.log("Board length:",e.length),e.length>0&&!h?(console.log("Saving game state..."),function(){console.log("Saving game state...");var e=l.map((function(e,a){return e.map((function(e,t){return{value:e,type:0!==e&&document.getElementById("".concat(a,"-").concat(t)).classList.contains("user-input")?"user-input":"tile-start"}}))})),a=e.map((function(e){return e.map((function(e){return function(e){return"tile-start"===e.type?0:1}(e)}))})),t=e.map((function(e){return e.map((function(e){return e.value}))})),i=document.getElementById("difficulty").innerText,d=document.getElementById("timer").innerText,c=JSON.stringify({currentSudokuState:t,simplifiedState:a,nestedSolution:u,errors:y,difficulty:i,timer:d});console.log("Saving game state to localStorage:",c),localStorage.setItem("sudokuGameState",c)}(),console.log("Game state saved successfully.")):console.log("No need to save game state.")})),window.addEventListener("DOMContentLoaded",(function(){localStorage.getItem("sudokuGameState")?(console.log("Game state found in localStorage. Loading game state..."),document.getElementById("start-modal").style.display="none",function(){console.log("Loading game state...");var e=localStorage.getItem("sudokuGameState");if(e){console.log("Game state found:",e);var a=JSON.parse(e);a.currentSudokuState&&a.nestedSolution&&a.simplifiedState&&void 0!==a.errors&&a.difficulty&&a.timer?(l=a.currentSudokuState,u=a.nestedSolution,function(e,a){n=null,D(),H(),M(),g=e,u=a;var t=localStorage.getItem("sudokuGameState"),i=JSON.parse(t);l=i.currentSudokuState,console.log(i.errors),i.errors>0&&(y=i.errors);var c=i.simplifiedState,o=i.timer;o&&$(K(o)),H(K(o)),f=C(g),B(),C(g);for(var r=1;r<=9;r++){var s=document.createElement("div");s.innerText=r,s.dataset.number=r,s.addEventListener("click",J),s.classList.add("number"),document.getElementById("digits").appendChild(s)}for(var h=0;h<9;h++)for(var b=0;b<9;b++){var m=document.createElement("div");m.id=h.toString()+"-"+b.toString();var v=l[h][b],L=0===c[h][b]?"tile-start":"user-input";0!==v?(m.innerText=v,m.classList.add(L),p[v-1]++,m.addEventListener("click",O)):m.addEventListener("click",O),2!=h&&5!=h||m.classList.add("horizontal-line"),0!=h&&1!=h&&3!=h&&4!=h&&6!=h&&7!=h||m.classList.add("horizontal-grid"),2!=b&&5!=b||m.classList.add("vertical-line"),0!=b&&1!=b&&3!=b&&4!=b&&6!=b&&7!=b||m.classList.add("vertical-grid"),m.classList.add("tile"),document.getElementById("board").append(m)}d=u,document.getElementById("errors").innerText="Mistakes: ".concat(y,"/3"),document.getElementById("difficulty").innerText=i.difficulty}(l,u)):console.error("Invalid game state format.")}else console.log("No game state found in localStorage.")}()):(console.log("Game is not over or no game state found. Showing modal."),document.getElementById("start-modal").style.display="block",document.getElementById("timer").innerText="",V())}))})()})();